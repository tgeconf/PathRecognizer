import Point from './point';
import Rectangle from './rect';
import UniStroke from './unistroke';
import Result from './result';
import { tool } from './tool';

export default class PathRecognizer {
    constructor() {
        this.NumUnistrokes = 3;
        this.Diagonal = Math.sqrt(tool.SquareSize * tool.SquareSize + tool.SquareSize * tool.SquareSize);
        this.HalfDiagonal = 0.5 * this.Diagonal;
        this.AngleRange = 45.0 * Math.PI / 180.0;
        this.AnglePrecision = 2.0 * Math.PI / 180.0;
        this.Phi = 0.5 * (-1.0 + Math.sqrt(5.0)); // Golden Ratio

        this.gestures = [];
        this.gestures.push(new UniStroke("check", new Array(new Point(91, 185), new Point(93, 185), new Point(95, 185), new Point(97, 185), new Point(100, 188), new Point(102, 189), new Point(104, 190), new Point(106, 193), new Point(108, 195), new Point(110, 198), new Point(112, 201), new Point(114, 204), new Point(115, 207), new Point(117, 210), new Point(118, 212), new Point(120, 214), new Point(121, 217), new Point(122, 219), new Point(123, 222), new Point(124, 224), new Point(126, 226), new Point(127, 229), new Point(129, 231), new Point(130, 233), new Point(129, 231), new Point(129, 228), new Point(129, 226), new Point(129, 224), new Point(129, 221), new Point(129, 218), new Point(129, 212), new Point(129, 208), new Point(130, 198), new Point(132, 189), new Point(134, 182), new Point(137, 173), new Point(143, 164), new Point(147, 157), new Point(151, 151), new Point(155, 144), new Point(161, 137), new Point(165, 131), new Point(171, 122), new Point(174, 118), new Point(176, 114), new Point(177, 112), new Point(177, 114), new Point(175, 116), new Point(173, 118))));
        this.gestures.push(new UniStroke('arrow', new Array(new Point(251, 295), new Point(251, 295), new Point(253, 295), new Point(254, 295), new Point(255, 295), new Point(256, 295), new Point(256, 294), new Point(257, 294), new Point(258, 294), new Point(259, 294), new Point(259, 293), new Point(260, 293), new Point(261, 293), new Point(262, 293), new Point(263, 293), new Point(264, 293), new Point(265, 293), new Point(266, 293), new Point(267, 293), new Point(268, 293), new Point(269, 293), new Point(270, 293), new Point(270, 292), new Point(271, 292), new Point(272, 292), new Point(273, 292), new Point(274, 292), new Point(275, 292), new Point(276, 292), new Point(277, 292), new Point(278, 292), new Point(279, 292), new Point(280, 292), new Point(281, 291), new Point(282, 291), new Point(283, 291), new Point(284, 291), new Point(285, 291), new Point(286, 291), new Point(287, 291), new Point(288, 291), new Point(289, 291), new Point(290, 291), new Point(291, 291), new Point(292, 291), new Point(293, 291), new Point(294, 291), new Point(295, 291), new Point(296, 291), new Point(297, 291), new Point(298, 291), new Point(299, 291), new Point(300, 291), new Point(301, 291), new Point(302, 291), new Point(303, 291), new Point(304, 291), new Point(305, 291), new Point(306, 291), new Point(307, 291), new Point(308, 293), new Point(309, 293), new Point(310, 293), new Point(311, 293), new Point(312, 293), new Point(313, 293), new Point(315, 294), new Point(316, 294), new Point(317, 294), new Point(318, 294), new Point(320, 294), new Point(321, 294), new Point(322, 294), new Point(323, 294), new Point(325, 294), new Point(326, 294), new Point(327, 294), new Point(329, 294), new Point(330, 294), new Point(332, 294), new Point(333, 294), new Point(335, 294), new Point(337, 294), new Point(338, 294), new Point(340, 294), new Point(341, 294), new Point(342, 294), new Point(344, 294), new Point(345, 294), new Point(346, 294), new Point(348, 294), new Point(350, 294), new Point(351, 294), new Point(352, 294), new Point(353, 294), new Point(354, 294), new Point(355, 294), new Point(356, 294), new Point(357, 294), new Point(358, 294), new Point(359, 295), new Point(360, 295), new Point(361, 295), new Point(362, 295), new Point(363, 295), new Point(364, 295), new Point(365, 295), new Point(366, 295), new Point(367, 295), new Point(368, 295), new Point(369, 295), new Point(370, 295), new Point(371, 295), new Point(372, 295), new Point(373, 295), new Point(374, 295), new Point(375, 296), new Point(376, 296), new Point(377, 296), new Point(378, 296), new Point(379, 296), new Point(380, 296), new Point(381, 296), new Point(382, 296), new Point(383, 296), new Point(384, 296), new Point(385, 296), new Point(386, 296), new Point(387, 296), new Point(389, 296), new Point(390, 296), new Point(391, 296), new Point(392, 296), new Point(393, 296), new Point(394, 296), new Point(395, 296), new Point(396, 296), new Point(397, 296), new Point(398, 296), new Point(399, 296), new Point(400, 296), new Point(401, 296), new Point(402, 296), new Point(403, 296), new Point(404, 296), new Point(405, 296), new Point(406, 296), new Point(407, 296), new Point(408, 296), new Point(409, 296), new Point(410, 296), new Point(411, 296), new Point(412, 296), new Point(413, 296), new Point(414, 296), new Point(415, 296), new Point(416, 296), new Point(417, 296), new Point(418, 296), new Point(419, 296), new Point(420, 296), new Point(421, 296), new Point(422, 296), new Point(423, 296), new Point(424, 296), new Point(425, 296), new Point(426, 296), new Point(427, 296), new Point(428, 296), new Point(429, 296), new Point(430, 296), new Point(431, 296), new Point(432, 296), new Point(433, 296), new Point(434, 296), new Point(435, 296), new Point(436, 296), new Point(437, 296), new Point(438, 296), new Point(439, 296), new Point(440, 296), new Point(441, 296), new Point(442, 296), new Point(443, 296), new Point(444, 296), new Point(445, 296), new Point(369, 266), new Point(371, 266), new Point(372, 266), new Point(373, 266), new Point(374, 266), new Point(375, 266), new Point(376, 266), new Point(377, 266), new Point(378, 266), new Point(379, 266), new Point(379, 268), new Point(380, 268), new Point(381, 268), new Point(382, 269), new Point(383, 269), new Point(384, 269), new Point(384, 270), new Point(386, 270), new Point(386, 271), new Point(387, 271), new Point(388, 271), new Point(389, 272), new Point(390, 272), new Point(391, 272), new Point(392, 273), new Point(393, 273), new Point(394, 273), new Point(395, 274), new Point(396, 274), new Point(397, 274), new Point(399, 274), new Point(399, 275), new Point(400, 275), new Point(401, 276), new Point(402, 276), new Point(403, 276), new Point(405, 277), new Point(407, 277), new Point(407, 278), new Point(408, 278), new Point(409, 278), new Point(410, 278), new Point(410, 279), new Point(411, 279), new Point(412, 279), new Point(413, 279), new Point(414, 279), new Point(414, 280), new Point(415, 280), new Point(416, 280), new Point(417, 281), new Point(418, 281), new Point(419, 282), new Point(420, 282), new Point(421, 282), new Point(421, 283), new Point(422, 283), new Point(423, 283), new Point(424, 284), new Point(425, 284), new Point(426, 285), new Point(427, 285), new Point(428, 285), new Point(429, 286), new Point(430, 286), new Point(431, 286), new Point(432, 287), new Point(433, 287), new Point(434, 288), new Point(435, 288), new Point(435, 289), new Point(436, 289), new Point(437, 289), new Point(438, 289), new Point(439, 289), new Point(440, 289), new Point(440, 290), new Point(441, 290), new Point(442, 291), new Point(443, 291), new Point(444, 291), new Point(444, 292), new Point(445, 292), new Point(446, 292), new Point(446, 293), new Point(447, 293), new Point(448, 293), new Point(449, 293), new Point(450, 294), new Point(451, 294), new Point(451, 295), new Point(452, 295), new Point(453, 295), new Point(454, 295), new Point(455, 296), new Point(456, 296), new Point(457, 296), new Point(457, 297), new Point(458, 297), new Point(459, 297), new Point(460, 297), new Point(461, 298), new Point(462, 298), new Point(463, 298), new Point(463, 299), new Point(464, 299), new Point(465, 299), new Point(466, 299), new Point(466, 300), new Point(464, 300), new Point(463, 300), new Point(462, 301), new Point(461, 301), new Point(460, 301), new Point(459, 301), new Point(458, 302), new Point(457, 302), new Point(456, 302), new Point(456, 303), new Point(455, 303), new Point(454, 303), new Point(454, 304), new Point(453, 304), new Point(452, 304), new Point(451, 304), new Point(451, 305), new Point(450, 305), new Point(449, 306), new Point(448, 306), new Point(447, 307), new Point(446, 307), new Point(445, 307), new Point(445, 308), new Point(444, 308), new Point(443, 308), new Point(443, 309), new Point(442, 309), new Point(442, 310), new Point(441, 310), new Point(440, 310), new Point(439, 310), new Point(439, 311), new Point(438, 311), new Point(438, 312), new Point(437, 312), new Point(436, 312), new Point(435, 313), new Point(434, 313), new Point(434, 314), new Point(433, 314), new Point(432, 314), new Point(431, 315), new Point(430, 315), new Point(429, 315), new Point(428, 316), new Point(427, 316), new Point(426, 316), new Point(426, 317), new Point(425, 317), new Point(424, 317), new Point(424, 318), new Point(423, 318), new Point(422, 318), new Point(422, 319), new Point(421, 319), new Point(420, 319), new Point(419, 319), new Point(419, 320), new Point(418, 320), new Point(417, 320), new Point(416, 321), new Point(415, 321), new Point(414, 321), new Point(414, 322), new Point(413, 322), new Point(412, 322), new Point(411, 322), new Point(411, 323), new Point(410, 323), new Point(409, 323), new Point(409, 324), new Point(408, 324), new Point(407, 324), new Point(407, 325), new Point(406, 325), new Point(405, 326), new Point(404, 326), new Point(404, 327), new Point(403, 327), new Point(402, 327), new Point(401, 328), new Point(401, 329), new Point(400, 329), new Point(399, 329), new Point(398, 329), new Point(398, 330), new Point(397, 330))));
        this.gestures.push(new UniStroke('arrow', new Array(new Point(576, 354), new Point(574, 354), new Point(573, 354), new Point(572, 354), new Point(571, 354), new Point(570, 354), new Point(569, 354), new Point(568, 354), new Point(567, 354), new Point(566, 354), new Point(565, 354), new Point(564, 354), new Point(563, 354), new Point(562, 354), new Point(561, 354), new Point(560, 354), new Point(559, 354), new Point(558, 354), new Point(557, 354), new Point(555, 354), new Point(554, 354), new Point(552, 354), new Point(551, 354), new Point(549, 354), new Point(547, 354), new Point(546, 356), new Point(544, 356), new Point(542, 356), new Point(540, 356), new Point(539, 356), new Point(537, 356), new Point(535, 356), new Point(533, 356), new Point(531, 356), new Point(529, 356), new Point(527, 356), new Point(525, 356), new Point(523, 356), new Point(521, 356), new Point(519, 357), new Point(518, 357), new Point(516, 357), new Point(514, 357), new Point(513, 357), new Point(511, 357), new Point(509, 357), new Point(507, 357), new Point(505, 357), new Point(504, 357), new Point(502, 357), new Point(500, 357), new Point(498, 357), new Point(497, 357), new Point(495, 357), new Point(493, 357), new Point(491, 357), new Point(489, 357), new Point(487, 357), new Point(485, 357), new Point(483, 357), new Point(481, 357), new Point(479, 357), new Point(477, 357), new Point(474, 357), new Point(472, 357), new Point(469, 357), new Point(467, 357), new Point(464, 357), new Point(461, 357), new Point(458, 355), new Point(456, 355), new Point(453, 355), new Point(450, 355), new Point(447, 355), new Point(444, 355), new Point(441, 354), new Point(438, 354), new Point(434, 354), new Point(431, 354), new Point(428, 354), new Point(425, 354), new Point(422, 354), new Point(418, 354), new Point(415, 354), new Point(412, 354), new Point(409, 354), new Point(406, 354), new Point(403, 354), new Point(399, 354), new Point(396, 354), new Point(393, 354), new Point(390, 354), new Point(387, 354), new Point(384, 354), new Point(381, 354), new Point(378, 354), new Point(375, 354), new Point(372, 354), new Point(369, 354), new Point(367, 354), new Point(364, 354), new Point(361, 354), new Point(359, 354), new Point(356, 354), new Point(354, 354), new Point(352, 354), new Point(350, 354), new Point(348, 356), new Point(346, 356), new Point(344, 356), new Point(342, 356), new Point(341, 356), new Point(339, 356), new Point(337, 356), new Point(336, 356), new Point(334, 356), new Point(333, 356), new Point(331, 356), new Point(330, 356), new Point(329, 356), new Point(327, 356), new Point(326, 356), new Point(325, 356), new Point(323, 356), new Point(322, 356), new Point(321, 356), new Point(319, 356), new Point(318, 356), new Point(317, 356), new Point(316, 356), new Point(314, 356), new Point(313, 356), new Point(312, 356), new Point(310, 356), new Point(309, 356), new Point(308, 356), new Point(307, 356), new Point(306, 356), new Point(305, 356), new Point(303, 356), new Point(301, 356), new Point(300, 356), new Point(299, 356), new Point(298, 356), new Point(296, 356), new Point(295, 356), new Point(294, 356), new Point(293, 356), new Point(292, 356), new Point(291, 356), new Point(290, 356), new Point(289, 356), new Point(288, 356), new Point(287, 356), new Point(286, 356), new Point(285, 356), new Point(284, 356), new Point(283, 356), new Point(282, 356), new Point(281, 356), new Point(280, 356), new Point(279, 356), new Point(278, 356), new Point(277, 356), new Point(276, 356), new Point(275, 356), new Point(274, 356), new Point(273, 356), new Point(272, 356), new Point(271, 356), new Point(270, 356), new Point(269, 356), new Point(268, 356), new Point(267, 356), new Point(266, 356), new Point(265, 356), new Point(264, 356), new Point(263, 356), new Point(262, 356), new Point(260, 356), new Point(259, 356), new Point(258, 356), new Point(257, 356), new Point(256, 356), new Point(255, 356), new Point(254, 356), new Point(253, 356), new Point(252, 356), new Point(251, 356), new Point(250, 356), new Point(249, 356), new Point(248, 356), new Point(247, 356), new Point(246, 356), new Point(245, 356), new Point(244, 356), new Point(243, 356), new Point(242, 356), new Point(241, 356), new Point(240, 356), new Point(239, 356), new Point(238, 356), new Point(237, 356), new Point(236, 356), new Point(235, 356), new Point(234, 356), new Point(233, 356), new Point(232, 356), new Point(231, 356), new Point(230, 356), new Point(229, 356), new Point(228, 356), new Point(227, 356), new Point(226, 356), new Point(226, 354), new Point(250, 337), new Point(249, 337), new Point(248, 337), new Point(247, 337), new Point(246, 337), new Point(246, 338), new Point(245, 338), new Point(244, 338), new Point(243, 338), new Point(243, 339), new Point(242, 339), new Point(241, 339), new Point(240, 340), new Point(239, 340), new Point(238, 340), new Point(238, 341), new Point(237, 341), new Point(236, 341), new Point(235, 342), new Point(234, 342), new Point(233, 342), new Point(232, 342), new Point(231, 342), new Point(230, 343), new Point(229, 343), new Point(228, 343), new Point(227, 344), new Point(226, 344), new Point(225, 344), new Point(224, 345), new Point(223, 345), new Point(222, 346), new Point(221, 346), new Point(219, 346), new Point(218, 347), new Point(217, 347), new Point(216, 348), new Point(214, 348), new Point(213, 349), new Point(212, 349), new Point(211, 350), new Point(210, 350), new Point(209, 350), new Point(208, 350), new Point(207, 351), new Point(206, 351), new Point(205, 352), new Point(204, 352), new Point(203, 352), new Point(202, 352), new Point(202, 353), new Point(201, 353), new Point(200, 353), new Point(200, 354), new Point(199, 354), new Point(198, 354), new Point(198, 355), new Point(200, 355), new Point(201, 355), new Point(202, 355), new Point(202, 356), new Point(203, 356), new Point(204, 356), new Point(205, 357), new Point(206, 357), new Point(206, 358), new Point(207, 358), new Point(208, 358), new Point(209, 358), new Point(210, 359), new Point(211, 360), new Point(212, 360), new Point(213, 361), new Point(214, 361), new Point(216, 362), new Point(218, 363), new Point(219, 363), new Point(220, 364), new Point(221, 365), new Point(222, 365), new Point(223, 366), new Point(225, 366), new Point(226, 367), new Point(227, 368), new Point(227, 369), new Point(229, 369), new Point(230, 369), new Point(230, 370), new Point(232, 370), new Point(233, 371), new Point(234, 371), new Point(235, 372), new Point(236, 372), new Point(237, 372), new Point(238, 373), new Point(239, 373), new Point(240, 374), new Point(241, 374), new Point(242, 374), new Point(243, 374), new Point(244, 375), new Point(245, 375), new Point(246, 376), new Point(247, 376), new Point(248, 376), new Point(249, 376), new Point(250, 377), new Point(251, 377), new Point(252, 378), new Point(253, 378), new Point(254, 378), new Point(255, 379), new Point(256, 379), new Point(256, 380), new Point(257, 380), new Point(258, 380), new Point(259, 381), new Point(260, 382), new Point(261, 382), new Point(262, 382), new Point(263, 383), new Point(264, 383), new Point(265, 383), new Point(266, 383), new Point(266, 384), new Point(267, 384), new Point(268, 384), new Point(268, 385), new Point(269, 385), new Point(270, 386), new Point(271, 386), new Point(271, 387), new Point(272, 387))));
        // this.gestures[0] = new UniStroke("triangle", new Array(new Point(137, 139), new Point(135, 141), new Point(133, 144), new Point(132, 146), new Point(130, 149), new Point(128, 151), new Point(126, 155), new Point(123, 160), new Point(120, 166), new Point(116, 171), new Point(112, 177), new Point(107, 183), new Point(102, 188), new Point(100, 191), new Point(95, 195), new Point(90, 199), new Point(86, 203), new Point(82, 206), new Point(80, 209), new Point(75, 213), new Point(73, 213), new Point(70, 216), new Point(67, 219), new Point(64, 221), new Point(61, 223), new Point(60, 225), new Point(62, 226), new Point(65, 225), new Point(67, 226), new Point(74, 226), new Point(77, 227), new Point(85, 229), new Point(91, 230), new Point(99, 231), new Point(108, 232), new Point(116, 233), new Point(125, 233), new Point(134, 234), new Point(145, 233), new Point(153, 232), new Point(160, 233), new Point(170, 234), new Point(177, 235), new Point(179, 236), new Point(186, 237), new Point(193, 238), new Point(198, 239), new Point(200, 237), new Point(202, 239), new Point(204, 238), new Point(206, 234), new Point(205, 230), new Point(202, 222), new Point(197, 216), new Point(192, 207), new Point(186, 198), new Point(179, 189), new Point(174, 183), new Point(170, 178), new Point(164, 171), new Point(161, 168), new Point(154, 160), new Point(148, 155), new Point(143, 150), new Point(138, 148), new Point(136, 148)));
        // this.gestures[1] = new UniStroke("x", new Array(new Point(87, 142), new Point(89, 145), new Point(91, 148), new Point(93, 151), new Point(96, 155), new Point(98, 157), new Point(100, 160), new Point(102, 162), new Point(106, 167), new Point(108, 169), new Point(110, 171), new Point(115, 177), new Point(119, 183), new Point(123, 189), new Point(127, 193), new Point(129, 196), new Point(133, 200), new Point(137, 206), new Point(140, 209), new Point(143, 212), new Point(146, 215), new Point(151, 220), new Point(153, 222), new Point(155, 223), new Point(157, 225), new Point(158, 223), new Point(157, 218), new Point(155, 211), new Point(154, 208), new Point(152, 200), new Point(150, 189), new Point(148, 179), new Point(147, 170), new Point(147, 158), new Point(147, 148), new Point(147, 141), new Point(147, 136), new Point(144, 135), new Point(142, 137), new Point(140, 139), new Point(135, 145), new Point(131, 152), new Point(124, 163), new Point(116, 177), new Point(108, 191), new Point(100, 206), new Point(94, 217), new Point(91, 222), new Point(89, 225), new Point(87, 226), new Point(87, 224)));
        // this.gestures[2] = new UniStroke("rectangle", new Array(new Point(78, 149), new Point(78, 153), new Point(78, 157), new Point(78, 160), new Point(79, 162), new Point(79, 164), new Point(79, 167), new Point(79, 169), new Point(79, 173), new Point(79, 178), new Point(79, 183), new Point(80, 189), new Point(80, 193), new Point(80, 198), new Point(80, 202), new Point(81, 208), new Point(81, 210), new Point(81, 216), new Point(82, 222), new Point(82, 224), new Point(82, 227), new Point(83, 229), new Point(83, 231), new Point(85, 230), new Point(88, 232), new Point(90, 233), new Point(92, 232), new Point(94, 233), new Point(99, 232), new Point(102, 233), new Point(106, 233), new Point(109, 234), new Point(117, 235), new Point(123, 236), new Point(126, 236), new Point(135, 237), new Point(142, 238), new Point(145, 238), new Point(152, 238), new Point(154, 239), new Point(165, 238), new Point(174, 237), new Point(179, 236), new Point(186, 235), new Point(191, 235), new Point(195, 233), new Point(197, 233), new Point(200, 233), new Point(201, 235), new Point(201, 233), new Point(199, 231), new Point(198, 226), new Point(198, 220), new Point(196, 207), new Point(195, 195), new Point(195, 181), new Point(195, 173), new Point(195, 163), new Point(194, 155), new Point(192, 145), new Point(192, 143), new Point(192, 138), new Point(191, 135), new Point(191, 133), new Point(191, 130), new Point(190, 128), new Point(188, 129), new Point(186, 129), new Point(181, 132), new Point(173, 131), new Point(162, 131), new Point(151, 132), new Point(149, 132), new Point(138, 132), new Point(136, 132), new Point(122, 131), new Point(120, 131), new Point(109, 130), new Point(107, 130), new Point(90, 132), new Point(81, 133), new Point(76, 133)));
        // this.gestures[3] = new UniStroke("circle", new Array(new Point(127, 141), new Point(124, 140), new Point(120, 139), new Point(118, 139), new Point(116, 139), new Point(111, 140), new Point(109, 141), new Point(104, 144), new Point(100, 147), new Point(96, 152), new Point(93, 157), new Point(90, 163), new Point(87, 169), new Point(85, 175), new Point(83, 181), new Point(82, 190), new Point(82, 195), new Point(83, 200), new Point(84, 205), new Point(88, 213), new Point(91, 216), new Point(96, 219), new Point(103, 222), new Point(108, 224), new Point(111, 224), new Point(120, 224), new Point(133, 223), new Point(142, 222), new Point(152, 218), new Point(160, 214), new Point(167, 210), new Point(173, 204), new Point(178, 198), new Point(179, 196), new Point(182, 188), new Point(182, 177), new Point(178, 167), new Point(170, 150), new Point(163, 138), new Point(152, 130), new Point(143, 129), new Point(140, 131), new Point(129, 136), new Point(126, 139)));
        // this.gestures[0] = new UniStroke("check", new Array(new Point(91, 185), new Point(93, 185), new Point(95, 185), new Point(97, 185), new Point(100, 188), new Point(102, 189), new Point(104, 190), new Point(106, 193), new Point(108, 195), new Point(110, 198), new Point(112, 201), new Point(114, 204), new Point(115, 207), new Point(117, 210), new Point(118, 212), new Point(120, 214), new Point(121, 217), new Point(122, 219), new Point(123, 222), new Point(124, 224), new Point(126, 226), new Point(127, 229), new Point(129, 231), new Point(130, 233), new Point(129, 231), new Point(129, 228), new Point(129, 226), new Point(129, 224), new Point(129, 221), new Point(129, 218), new Point(129, 212), new Point(129, 208), new Point(130, 198), new Point(132, 189), new Point(134, 182), new Point(137, 173), new Point(143, 164), new Point(147, 157), new Point(151, 151), new Point(155, 144), new Point(161, 137), new Point(165, 131), new Point(171, 122), new Point(174, 118), new Point(176, 114), new Point(177, 112), new Point(177, 114), new Point(175, 116), new Point(173, 118)));
        // this.gestures[5] = new UniStroke("caret", new Array(new Point(79, 245), new Point(79, 242), new Point(79, 239), new Point(80, 237), new Point(80, 234), new Point(81, 232), new Point(82, 230), new Point(84, 224), new Point(86, 220), new Point(86, 218), new Point(87, 216), new Point(88, 213), new Point(90, 207), new Point(91, 202), new Point(92, 200), new Point(93, 194), new Point(94, 192), new Point(96, 189), new Point(97, 186), new Point(100, 179), new Point(102, 173), new Point(105, 165), new Point(107, 160), new Point(109, 158), new Point(112, 151), new Point(115, 144), new Point(117, 139), new Point(119, 136), new Point(119, 134), new Point(120, 132), new Point(121, 129), new Point(122, 127), new Point(124, 125), new Point(126, 124), new Point(129, 125), new Point(131, 127), new Point(132, 130), new Point(136, 139), new Point(141, 154), new Point(145, 166), new Point(151, 182), new Point(156, 193), new Point(157, 196), new Point(161, 209), new Point(162, 211), new Point(167, 223), new Point(169, 229), new Point(170, 231), new Point(173, 237), new Point(176, 242), new Point(177, 244), new Point(179, 250), new Point(181, 255), new Point(182, 257)));
        // this.gestures[6] = new UniStroke("zig-zag", new Array(new Point(307, 216), new Point(333, 186), new Point(356, 215), new Point(375, 186), new Point(399, 216), new Point(418, 186)));
        // this.gestures[7] = new UniStroke("arrow", new Array(new Point(68, 222), new Point(70, 220), new Point(73, 218), new Point(75, 217), new Point(77, 215), new Point(80, 213), new Point(82, 212), new Point(84, 210), new Point(87, 209), new Point(89, 208), new Point(92, 206), new Point(95, 204), new Point(101, 201), new Point(106, 198), new Point(112, 194), new Point(118, 191), new Point(124, 187), new Point(127, 186), new Point(132, 183), new Point(138, 181), new Point(141, 180), new Point(146, 178), new Point(154, 173), new Point(159, 171), new Point(161, 170), new Point(166, 167), new Point(168, 167), new Point(171, 166), new Point(174, 164), new Point(177, 162), new Point(180, 160), new Point(182, 158), new Point(183, 156), new Point(181, 154), new Point(178, 153), new Point(171, 153), new Point(164, 153), new Point(160, 153), new Point(150, 154), new Point(147, 155), new Point(141, 157), new Point(137, 158), new Point(135, 158), new Point(137, 158), new Point(140, 157), new Point(143, 156), new Point(151, 154), new Point(160, 152), new Point(170, 149), new Point(179, 147), new Point(185, 145), new Point(192, 144), new Point(196, 144), new Point(198, 144), new Point(200, 144), new Point(201, 147), new Point(199, 149), new Point(194, 157), new Point(191, 160), new Point(186, 167), new Point(180, 176), new Point(177, 179), new Point(171, 187), new Point(169, 189), new Point(165, 194), new Point(164, 196)));
        // this.gestures[8] = new UniStroke("left square bracket", new Array(new Point(140, 124), new Point(138, 123), new Point(135, 122), new Point(133, 123), new Point(130, 123), new Point(128, 124), new Point(125, 125), new Point(122, 124), new Point(120, 124), new Point(118, 124), new Point(116, 125), new Point(113, 125), new Point(111, 125), new Point(108, 124), new Point(106, 125), new Point(104, 125), new Point(102, 124), new Point(100, 123), new Point(98, 123), new Point(95, 124), new Point(93, 123), new Point(90, 124), new Point(88, 124), new Point(85, 125), new Point(83, 126), new Point(81, 127), new Point(81, 129), new Point(82, 131), new Point(82, 134), new Point(83, 138), new Point(84, 141), new Point(84, 144), new Point(85, 148), new Point(85, 151), new Point(86, 156), new Point(86, 160), new Point(86, 164), new Point(86, 168), new Point(87, 171), new Point(87, 175), new Point(87, 179), new Point(87, 182), new Point(87, 186), new Point(88, 188), new Point(88, 195), new Point(88, 198), new Point(88, 201), new Point(88, 207), new Point(89, 211), new Point(89, 213), new Point(89, 217), new Point(89, 222), new Point(88, 225), new Point(88, 229), new Point(88, 231), new Point(88, 233), new Point(88, 235), new Point(89, 237), new Point(89, 240), new Point(89, 242), new Point(91, 241), new Point(94, 241), new Point(96, 240), new Point(98, 239), new Point(105, 240), new Point(109, 240), new Point(113, 239), new Point(116, 240), new Point(121, 239), new Point(130, 240), new Point(136, 237), new Point(139, 237), new Point(144, 238), new Point(151, 237), new Point(157, 236), new Point(159, 237)));
        // this.gestures[9] = new UniStroke("right square bracket", new Array(new Point(112, 138), new Point(112, 136), new Point(115, 136), new Point(118, 137), new Point(120, 136), new Point(123, 136), new Point(125, 136), new Point(128, 136), new Point(131, 136), new Point(134, 135), new Point(137, 135), new Point(140, 134), new Point(143, 133), new Point(145, 132), new Point(147, 132), new Point(149, 132), new Point(152, 132), new Point(153, 134), new Point(154, 137), new Point(155, 141), new Point(156, 144), new Point(157, 152), new Point(158, 161), new Point(160, 170), new Point(162, 182), new Point(164, 192), new Point(166, 200), new Point(167, 209), new Point(168, 214), new Point(168, 216), new Point(169, 221), new Point(169, 223), new Point(169, 228), new Point(169, 231), new Point(166, 233), new Point(164, 234), new Point(161, 235), new Point(155, 236), new Point(147, 235), new Point(140, 233), new Point(131, 233), new Point(124, 233), new Point(117, 235), new Point(114, 238), new Point(112, 238)));
        // this.gestures[10] = new UniStroke("v", new Array(new Point(89, 164), new Point(90, 162), new Point(92, 162), new Point(94, 164), new Point(95, 166), new Point(96, 169), new Point(97, 171), new Point(99, 175), new Point(101, 178), new Point(103, 182), new Point(106, 189), new Point(108, 194), new Point(111, 199), new Point(114, 204), new Point(117, 209), new Point(119, 214), new Point(122, 218), new Point(124, 222), new Point(126, 225), new Point(128, 228), new Point(130, 229), new Point(133, 233), new Point(134, 236), new Point(136, 239), new Point(138, 240), new Point(139, 242), new Point(140, 244), new Point(142, 242), new Point(142, 240), new Point(142, 237), new Point(143, 235), new Point(143, 233), new Point(145, 229), new Point(146, 226), new Point(148, 217), new Point(149, 208), new Point(149, 205), new Point(151, 196), new Point(151, 193), new Point(153, 182), new Point(155, 172), new Point(157, 165), new Point(159, 160), new Point(162, 155), new Point(164, 150), new Point(165, 148), new Point(166, 146)));
        // this.gestures[11] = new UniStroke("delete", new Array(new Point(123, 129), new Point(123, 131), new Point(124, 133), new Point(125, 136), new Point(127, 140), new Point(129, 142), new Point(133, 148), new Point(137, 154), new Point(143, 158), new Point(145, 161), new Point(148, 164), new Point(153, 170), new Point(158, 176), new Point(160, 178), new Point(164, 183), new Point(168, 188), new Point(171, 191), new Point(175, 196), new Point(178, 200), new Point(180, 202), new Point(181, 205), new Point(184, 208), new Point(186, 210), new Point(187, 213), new Point(188, 215), new Point(186, 212), new Point(183, 211), new Point(177, 208), new Point(169, 206), new Point(162, 205), new Point(154, 207), new Point(145, 209), new Point(137, 210), new Point(129, 214), new Point(122, 217), new Point(118, 218), new Point(111, 221), new Point(109, 222), new Point(110, 219), new Point(112, 217), new Point(118, 209), new Point(120, 207), new Point(128, 196), new Point(135, 187), new Point(138, 183), new Point(148, 167), new Point(157, 153), new Point(163, 145), new Point(165, 142), new Point(172, 133), new Point(177, 127), new Point(179, 127), new Point(180, 125)));
        // this.gestures[12] = new UniStroke("left curly brace", new Array(new Point(150, 116), new Point(147, 117), new Point(145, 116), new Point(142, 116), new Point(139, 117), new Point(136, 117), new Point(133, 118), new Point(129, 121), new Point(126, 122), new Point(123, 123), new Point(120, 125), new Point(118, 127), new Point(115, 128), new Point(113, 129), new Point(112, 131), new Point(113, 134), new Point(115, 134), new Point(117, 135), new Point(120, 135), new Point(123, 137), new Point(126, 138), new Point(129, 140), new Point(135, 143), new Point(137, 144), new Point(139, 147), new Point(141, 149), new Point(140, 152), new Point(139, 155), new Point(134, 159), new Point(131, 161), new Point(124, 166), new Point(121, 166), new Point(117, 166), new Point(114, 167), new Point(112, 166), new Point(114, 164), new Point(116, 163), new Point(118, 163), new Point(120, 162), new Point(122, 163), new Point(125, 164), new Point(127, 165), new Point(129, 166), new Point(130, 168), new Point(129, 171), new Point(127, 175), new Point(125, 179), new Point(123, 184), new Point(121, 190), new Point(120, 194), new Point(119, 199), new Point(120, 202), new Point(123, 207), new Point(127, 211), new Point(133, 215), new Point(142, 219), new Point(148, 220), new Point(151, 221)));
        // this.gestures[13] = new UniStroke("right curly brace", new Array(new Point(117, 132), new Point(115, 132), new Point(115, 129), new Point(117, 129), new Point(119, 128), new Point(122, 127), new Point(125, 127), new Point(127, 127), new Point(130, 127), new Point(133, 129), new Point(136, 129), new Point(138, 130), new Point(140, 131), new Point(143, 134), new Point(144, 136), new Point(145, 139), new Point(145, 142), new Point(145, 145), new Point(145, 147), new Point(145, 149), new Point(144, 152), new Point(142, 157), new Point(141, 160), new Point(139, 163), new Point(137, 166), new Point(135, 167), new Point(133, 169), new Point(131, 172), new Point(128, 173), new Point(126, 176), new Point(125, 178), new Point(125, 180), new Point(125, 182), new Point(126, 184), new Point(128, 187), new Point(130, 187), new Point(132, 188), new Point(135, 189), new Point(140, 189), new Point(145, 189), new Point(150, 187), new Point(155, 186), new Point(157, 185), new Point(159, 184), new Point(156, 185), new Point(154, 185), new Point(149, 185), new Point(145, 187), new Point(141, 188), new Point(136, 191), new Point(134, 191), new Point(131, 192), new Point(129, 193), new Point(129, 195), new Point(129, 197), new Point(131, 200), new Point(133, 202), new Point(136, 206), new Point(139, 211), new Point(142, 215), new Point(145, 220), new Point(147, 225), new Point(148, 231), new Point(147, 239), new Point(144, 244), new Point(139, 248), new Point(134, 250), new Point(126, 253), new Point(119, 253), new Point(115, 253)));
        // this.gestures[14] = new UniStroke("star", new Array(new Point(75, 250), new Point(75, 247), new Point(77, 244), new Point(78, 242), new Point(79, 239), new Point(80, 237), new Point(82, 234), new Point(82, 232), new Point(84, 229), new Point(85, 225), new Point(87, 222), new Point(88, 219), new Point(89, 216), new Point(91, 212), new Point(92, 208), new Point(94, 204), new Point(95, 201), new Point(96, 196), new Point(97, 194), new Point(98, 191), new Point(100, 185), new Point(102, 178), new Point(104, 173), new Point(104, 171), new Point(105, 164), new Point(106, 158), new Point(107, 156), new Point(107, 152), new Point(108, 145), new Point(109, 141), new Point(110, 139), new Point(112, 133), new Point(113, 131), new Point(116, 127), new Point(117, 125), new Point(119, 122), new Point(121, 121), new Point(123, 120), new Point(125, 122), new Point(125, 125), new Point(127, 130), new Point(128, 133), new Point(131, 143), new Point(136, 153), new Point(140, 163), new Point(144, 172), new Point(145, 175), new Point(151, 189), new Point(156, 201), new Point(161, 213), new Point(166, 225), new Point(169, 233), new Point(171, 236), new Point(174, 243), new Point(177, 247), new Point(178, 249), new Point(179, 251), new Point(180, 253), new Point(180, 255), new Point(179, 257), new Point(177, 257), new Point(174, 255), new Point(169, 250), new Point(164, 247), new Point(160, 245), new Point(149, 238), new Point(138, 230), new Point(127, 221), new Point(124, 220), new Point(112, 212), new Point(110, 210), new Point(96, 201), new Point(84, 195), new Point(74, 190), new Point(64, 182), new Point(55, 175), new Point(51, 172), new Point(49, 170), new Point(51, 169), new Point(56, 169), new Point(66, 169), new Point(78, 168), new Point(92, 166), new Point(107, 164), new Point(123, 161), new Point(140, 162), new Point(156, 162), new Point(171, 160), new Point(173, 160), new Point(186, 160), new Point(195, 160), new Point(198, 161), new Point(203, 163), new Point(208, 163), new Point(206, 164), new Point(200, 167), new Point(187, 172), new Point(174, 179), new Point(172, 181), new Point(153, 192), new Point(137, 201), new Point(123, 211), new Point(112, 220), new Point(99, 229), new Point(90, 237), new Point(80, 244), new Point(73, 250), new Point(69, 254), new Point(69, 252)));
        // this.gestures[15] = new UniStroke("pigtail", new Array(new Point(81, 219), new Point(84, 218), new Point(86, 220), new Point(88, 220), new Point(90, 220), new Point(92, 219), new Point(95, 220), new Point(97, 219), new Point(99, 220), new Point(102, 218), new Point(105, 217), new Point(107, 216), new Point(110, 216), new Point(113, 214), new Point(116, 212), new Point(118, 210), new Point(121, 208), new Point(124, 205), new Point(126, 202), new Point(129, 199), new Point(132, 196), new Point(136, 191), new Point(139, 187), new Point(142, 182), new Point(144, 179), new Point(146, 174), new Point(148, 170), new Point(149, 168), new Point(151, 162), new Point(152, 160), new Point(152, 157), new Point(152, 155), new Point(152, 151), new Point(152, 149), new Point(152, 146), new Point(149, 142), new Point(148, 139), new Point(145, 137), new Point(141, 135), new Point(139, 135), new Point(134, 136), new Point(130, 140), new Point(128, 142), new Point(126, 145), new Point(122, 150), new Point(119, 158), new Point(117, 163), new Point(115, 170), new Point(114, 175), new Point(117, 184), new Point(120, 190), new Point(125, 199), new Point(129, 203), new Point(133, 208), new Point(138, 213), new Point(145, 215), new Point(155, 218), new Point(164, 219), new Point(166, 219), new Point(177, 219), new Point(182, 218), new Point(192, 216), new Point(196, 213), new Point(199, 212), new Point(201, 211)));
        // this.gestures[1] = new UniStroke('arrow', new Array(new Point(251, 295), new Point(251, 295), new Point(253, 295), new Point(254, 295), new Point(255, 295), new Point(256, 295), new Point(256, 294), new Point(257, 294), new Point(258, 294), new Point(259, 294), new Point(259, 293), new Point(260, 293), new Point(261, 293), new Point(262, 293), new Point(263, 293), new Point(264, 293), new Point(265, 293), new Point(266, 293), new Point(267, 293), new Point(268, 293), new Point(269, 293), new Point(270, 293), new Point(270, 292), new Point(271, 292), new Point(272, 292), new Point(273, 292), new Point(274, 292), new Point(275, 292), new Point(276, 292), new Point(277, 292), new Point(278, 292), new Point(279, 292), new Point(280, 292), new Point(281, 291), new Point(282, 291), new Point(283, 291), new Point(284, 291), new Point(285, 291), new Point(286, 291), new Point(287, 291), new Point(288, 291), new Point(289, 291), new Point(290, 291), new Point(291, 291), new Point(292, 291), new Point(293, 291), new Point(294, 291), new Point(295, 291), new Point(296, 291), new Point(297, 291), new Point(298, 291), new Point(299, 291), new Point(300, 291), new Point(301, 291), new Point(302, 291), new Point(303, 291), new Point(304, 291), new Point(305, 291), new Point(306, 291), new Point(307, 291), new Point(308, 293), new Point(309, 293), new Point(310, 293), new Point(311, 293), new Point(312, 293), new Point(313, 293), new Point(315, 294), new Point(316, 294), new Point(317, 294), new Point(318, 294), new Point(320, 294), new Point(321, 294), new Point(322, 294), new Point(323, 294), new Point(325, 294), new Point(326, 294), new Point(327, 294), new Point(329, 294), new Point(330, 294), new Point(332, 294), new Point(333, 294), new Point(335, 294), new Point(337, 294), new Point(338, 294), new Point(340, 294), new Point(341, 294), new Point(342, 294), new Point(344, 294), new Point(345, 294), new Point(346, 294), new Point(348, 294), new Point(350, 294), new Point(351, 294), new Point(352, 294), new Point(353, 294), new Point(354, 294), new Point(355, 294), new Point(356, 294), new Point(357, 294), new Point(358, 294), new Point(359, 295), new Point(360, 295), new Point(361, 295), new Point(362, 295), new Point(363, 295), new Point(364, 295), new Point(365, 295), new Point(366, 295), new Point(367, 295), new Point(368, 295), new Point(369, 295), new Point(370, 295), new Point(371, 295), new Point(372, 295), new Point(373, 295), new Point(374, 295), new Point(375, 296), new Point(376, 296), new Point(377, 296), new Point(378, 296), new Point(379, 296), new Point(380, 296), new Point(381, 296), new Point(382, 296), new Point(383, 296), new Point(384, 296), new Point(385, 296), new Point(386, 296), new Point(387, 296), new Point(389, 296), new Point(390, 296), new Point(391, 296), new Point(392, 296), new Point(393, 296), new Point(394, 296), new Point(395, 296), new Point(396, 296), new Point(397, 296), new Point(398, 296), new Point(399, 296), new Point(400, 296), new Point(401, 296), new Point(402, 296), new Point(403, 296), new Point(404, 296), new Point(405, 296), new Point(406, 296), new Point(407, 296), new Point(408, 296), new Point(409, 296), new Point(410, 296), new Point(411, 296), new Point(412, 296), new Point(413, 296), new Point(414, 296), new Point(415, 296), new Point(416, 296), new Point(417, 296), new Point(418, 296), new Point(419, 296), new Point(420, 296), new Point(421, 296), new Point(422, 296), new Point(423, 296), new Point(424, 296), new Point(425, 296), new Point(426, 296), new Point(427, 296), new Point(428, 296), new Point(429, 296), new Point(430, 296), new Point(431, 296), new Point(432, 296), new Point(433, 296), new Point(434, 296), new Point(435, 296), new Point(436, 296), new Point(437, 296), new Point(438, 296), new Point(439, 296), new Point(440, 296), new Point(441, 296), new Point(442, 296), new Point(443, 296), new Point(444, 296), new Point(445, 296), new Point(369, 266), new Point(371, 266), new Point(372, 266), new Point(373, 266), new Point(374, 266), new Point(375, 266), new Point(376, 266), new Point(377, 266), new Point(378, 266), new Point(379, 266), new Point(379, 268), new Point(380, 268), new Point(381, 268), new Point(382, 269), new Point(383, 269), new Point(384, 269), new Point(384, 270), new Point(386, 270), new Point(386, 271), new Point(387, 271), new Point(388, 271), new Point(389, 272), new Point(390, 272), new Point(391, 272), new Point(392, 273), new Point(393, 273), new Point(394, 273), new Point(395, 274), new Point(396, 274), new Point(397, 274), new Point(399, 274), new Point(399, 275), new Point(400, 275), new Point(401, 276), new Point(402, 276), new Point(403, 276), new Point(405, 277), new Point(407, 277), new Point(407, 278), new Point(408, 278), new Point(409, 278), new Point(410, 278), new Point(410, 279), new Point(411, 279), new Point(412, 279), new Point(413, 279), new Point(414, 279), new Point(414, 280), new Point(415, 280), new Point(416, 280), new Point(417, 281), new Point(418, 281), new Point(419, 282), new Point(420, 282), new Point(421, 282), new Point(421, 283), new Point(422, 283), new Point(423, 283), new Point(424, 284), new Point(425, 284), new Point(426, 285), new Point(427, 285), new Point(428, 285), new Point(429, 286), new Point(430, 286), new Point(431, 286), new Point(432, 287), new Point(433, 287), new Point(434, 288), new Point(435, 288), new Point(435, 289), new Point(436, 289), new Point(437, 289), new Point(438, 289), new Point(439, 289), new Point(440, 289), new Point(440, 290), new Point(441, 290), new Point(442, 291), new Point(443, 291), new Point(444, 291), new Point(444, 292), new Point(445, 292), new Point(446, 292), new Point(446, 293), new Point(447, 293), new Point(448, 293), new Point(449, 293), new Point(450, 294), new Point(451, 294), new Point(451, 295), new Point(452, 295), new Point(453, 295), new Point(454, 295), new Point(455, 296), new Point(456, 296), new Point(457, 296), new Point(457, 297), new Point(458, 297), new Point(459, 297), new Point(460, 297), new Point(461, 298), new Point(462, 298), new Point(463, 298), new Point(463, 299), new Point(464, 299), new Point(465, 299), new Point(466, 299), new Point(466, 300), new Point(464, 300), new Point(463, 300), new Point(462, 301), new Point(461, 301), new Point(460, 301), new Point(459, 301), new Point(458, 302), new Point(457, 302), new Point(456, 302), new Point(456, 303), new Point(455, 303), new Point(454, 303), new Point(454, 304), new Point(453, 304), new Point(452, 304), new Point(451, 304), new Point(451, 305), new Point(450, 305), new Point(449, 306), new Point(448, 306), new Point(447, 307), new Point(446, 307), new Point(445, 307), new Point(445, 308), new Point(444, 308), new Point(443, 308), new Point(443, 309), new Point(442, 309), new Point(442, 310), new Point(441, 310), new Point(440, 310), new Point(439, 310), new Point(439, 311), new Point(438, 311), new Point(438, 312), new Point(437, 312), new Point(436, 312), new Point(435, 313), new Point(434, 313), new Point(434, 314), new Point(433, 314), new Point(432, 314), new Point(431, 315), new Point(430, 315), new Point(429, 315), new Point(428, 316), new Point(427, 316), new Point(426, 316), new Point(426, 317), new Point(425, 317), new Point(424, 317), new Point(424, 318), new Point(423, 318), new Point(422, 318), new Point(422, 319), new Point(421, 319), new Point(420, 319), new Point(419, 319), new Point(419, 320), new Point(418, 320), new Point(417, 320), new Point(416, 321), new Point(415, 321), new Point(414, 321), new Point(414, 322), new Point(413, 322), new Point(412, 322), new Point(411, 322), new Point(411, 323), new Point(410, 323), new Point(409, 323), new Point(409, 324), new Point(408, 324), new Point(407, 324), new Point(407, 325), new Point(406, 325), new Point(405, 326), new Point(404, 326), new Point(404, 327), new Point(403, 327), new Point(402, 327), new Point(401, 328), new Point(401, 329), new Point(400, 329), new Point(399, 329), new Point(398, 329), new Point(398, 330), new Point(397, 330)));
        // this.gestures[2] = new UniStroke('arrow', new Array(new Point(576, 354), new Point(574, 354), new Point(573, 354), new Point(572, 354), new Point(571, 354), new Point(570, 354), new Point(569, 354), new Point(568, 354), new Point(567, 354), new Point(566, 354), new Point(565, 354), new Point(564, 354), new Point(563, 354), new Point(562, 354), new Point(561, 354), new Point(560, 354), new Point(559, 354), new Point(558, 354), new Point(557, 354), new Point(555, 354), new Point(554, 354), new Point(552, 354), new Point(551, 354), new Point(549, 354), new Point(547, 354), new Point(546, 356), new Point(544, 356), new Point(542, 356), new Point(540, 356), new Point(539, 356), new Point(537, 356), new Point(535, 356), new Point(533, 356), new Point(531, 356), new Point(529, 356), new Point(527, 356), new Point(525, 356), new Point(523, 356), new Point(521, 356), new Point(519, 357), new Point(518, 357), new Point(516, 357), new Point(514, 357), new Point(513, 357), new Point(511, 357), new Point(509, 357), new Point(507, 357), new Point(505, 357), new Point(504, 357), new Point(502, 357), new Point(500, 357), new Point(498, 357), new Point(497, 357), new Point(495, 357), new Point(493, 357), new Point(491, 357), new Point(489, 357), new Point(487, 357), new Point(485, 357), new Point(483, 357), new Point(481, 357), new Point(479, 357), new Point(477, 357), new Point(474, 357), new Point(472, 357), new Point(469, 357), new Point(467, 357), new Point(464, 357), new Point(461, 357), new Point(458, 355), new Point(456, 355), new Point(453, 355), new Point(450, 355), new Point(447, 355), new Point(444, 355), new Point(441, 354), new Point(438, 354), new Point(434, 354), new Point(431, 354), new Point(428, 354), new Point(425, 354), new Point(422, 354), new Point(418, 354), new Point(415, 354), new Point(412, 354), new Point(409, 354), new Point(406, 354), new Point(403, 354), new Point(399, 354), new Point(396, 354), new Point(393, 354), new Point(390, 354), new Point(387, 354), new Point(384, 354), new Point(381, 354), new Point(378, 354), new Point(375, 354), new Point(372, 354), new Point(369, 354), new Point(367, 354), new Point(364, 354), new Point(361, 354), new Point(359, 354), new Point(356, 354), new Point(354, 354), new Point(352, 354), new Point(350, 354), new Point(348, 356), new Point(346, 356), new Point(344, 356), new Point(342, 356), new Point(341, 356), new Point(339, 356), new Point(337, 356), new Point(336, 356), new Point(334, 356), new Point(333, 356), new Point(331, 356), new Point(330, 356), new Point(329, 356), new Point(327, 356), new Point(326, 356), new Point(325, 356), new Point(323, 356), new Point(322, 356), new Point(321, 356), new Point(319, 356), new Point(318, 356), new Point(317, 356), new Point(316, 356), new Point(314, 356), new Point(313, 356), new Point(312, 356), new Point(310, 356), new Point(309, 356), new Point(308, 356), new Point(307, 356), new Point(306, 356), new Point(305, 356), new Point(303, 356), new Point(301, 356), new Point(300, 356), new Point(299, 356), new Point(298, 356), new Point(296, 356), new Point(295, 356), new Point(294, 356), new Point(293, 356), new Point(292, 356), new Point(291, 356), new Point(290, 356), new Point(289, 356), new Point(288, 356), new Point(287, 356), new Point(286, 356), new Point(285, 356), new Point(284, 356), new Point(283, 356), new Point(282, 356), new Point(281, 356), new Point(280, 356), new Point(279, 356), new Point(278, 356), new Point(277, 356), new Point(276, 356), new Point(275, 356), new Point(274, 356), new Point(273, 356), new Point(272, 356), new Point(271, 356), new Point(270, 356), new Point(269, 356), new Point(268, 356), new Point(267, 356), new Point(266, 356), new Point(265, 356), new Point(264, 356), new Point(263, 356), new Point(262, 356), new Point(260, 356), new Point(259, 356), new Point(258, 356), new Point(257, 356), new Point(256, 356), new Point(255, 356), new Point(254, 356), new Point(253, 356), new Point(252, 356), new Point(251, 356), new Point(250, 356), new Point(249, 356), new Point(248, 356), new Point(247, 356), new Point(246, 356), new Point(245, 356), new Point(244, 356), new Point(243, 356), new Point(242, 356), new Point(241, 356), new Point(240, 356), new Point(239, 356), new Point(238, 356), new Point(237, 356), new Point(236, 356), new Point(235, 356), new Point(234, 356), new Point(233, 356), new Point(232, 356), new Point(231, 356), new Point(230, 356), new Point(229, 356), new Point(228, 356), new Point(227, 356), new Point(226, 356), new Point(226, 354), new Point(250, 337), new Point(249, 337), new Point(248, 337), new Point(247, 337), new Point(246, 337), new Point(246, 338), new Point(245, 338), new Point(244, 338), new Point(243, 338), new Point(243, 339), new Point(242, 339), new Point(241, 339), new Point(240, 340), new Point(239, 340), new Point(238, 340), new Point(238, 341), new Point(237, 341), new Point(236, 341), new Point(235, 342), new Point(234, 342), new Point(233, 342), new Point(232, 342), new Point(231, 342), new Point(230, 343), new Point(229, 343), new Point(228, 343), new Point(227, 344), new Point(226, 344), new Point(225, 344), new Point(224, 345), new Point(223, 345), new Point(222, 346), new Point(221, 346), new Point(219, 346), new Point(218, 347), new Point(217, 347), new Point(216, 348), new Point(214, 348), new Point(213, 349), new Point(212, 349), new Point(211, 350), new Point(210, 350), new Point(209, 350), new Point(208, 350), new Point(207, 351), new Point(206, 351), new Point(205, 352), new Point(204, 352), new Point(203, 352), new Point(202, 352), new Point(202, 353), new Point(201, 353), new Point(200, 353), new Point(200, 354), new Point(199, 354), new Point(198, 354), new Point(198, 355), new Point(200, 355), new Point(201, 355), new Point(202, 355), new Point(202, 356), new Point(203, 356), new Point(204, 356), new Point(205, 357), new Point(206, 357), new Point(206, 358), new Point(207, 358), new Point(208, 358), new Point(209, 358), new Point(210, 359), new Point(211, 360), new Point(212, 360), new Point(213, 361), new Point(214, 361), new Point(216, 362), new Point(218, 363), new Point(219, 363), new Point(220, 364), new Point(221, 365), new Point(222, 365), new Point(223, 366), new Point(225, 366), new Point(226, 367), new Point(227, 368), new Point(227, 369), new Point(229, 369), new Point(230, 369), new Point(230, 370), new Point(232, 370), new Point(233, 371), new Point(234, 371), new Point(235, 372), new Point(236, 372), new Point(237, 372), new Point(238, 373), new Point(239, 373), new Point(240, 374), new Point(241, 374), new Point(242, 374), new Point(243, 374), new Point(244, 375), new Point(245, 375), new Point(246, 376), new Point(247, 376), new Point(248, 376), new Point(249, 376), new Point(250, 377), new Point(251, 377), new Point(252, 378), new Point(253, 378), new Point(254, 378), new Point(255, 379), new Point(256, 379), new Point(256, 380), new Point(257, 380), new Point(258, 380), new Point(259, 381), new Point(260, 382), new Point(261, 382), new Point(262, 382), new Point(263, 383), new Point(264, 383), new Point(265, 383), new Point(266, 383), new Point(266, 384), new Point(267, 384), new Point(268, 384), new Point(268, 385), new Point(269, 385), new Point(270, 386), new Point(271, 386), new Point(271, 387), new Point(272, 387)));
    }

    optimalCosineDistance(v1, v2) {
        let a = 0.0;
        let b = 0.0;
        for (let i = 0; i < v1.length; i += 2) {
            a += v1[i] * v2[i] + v1[i + 1] * v2[i + 1];
            b += v1[i] * v2[i + 1] - v1[i + 1] * v2[i];
        }
        let angle = Math.atan(b / a);
        return Math.acos(a * Math.cos(angle) + b * Math.sin(angle));
    }

    pathDistance(pts1, pts2) {
        let d = 0.0;
        for (let i = 0; i < pts1.length; i++) // assumes pts1.length == pts2.length
            d += tool.distanceTo(pts1[i], pts2[i]);
        return d / pts1.length;
    }

    distanceAtAngle(points, T, radians) {
        let newpoints = tool.rotateBy(points, radians);
        return pathDistance(newpoints, T.points);
    }

    distanceAtBestAngle(points, T, a, b, threshold) {
        let x1 = this.Phi * a + (1.0 - this.Phi) * b;
        let f1 = this.distanceAtAngle(points, T, x1);
        let x2 = (1.0 - this.Phi) * a + this.Phi * b;
        let f2 = this.distanceAtAngle(points, T, x2);
        while (Math.abs(b - a) > threshold) {
            if (f1 < f2) {
                b = x2;
                x2 = x1;
                f2 = f1;
                x1 = this.Phi * a + (1.0 - this.Phi) * b;
                f1 = this.distanceAtAngle(points, T, x1);
            } else {
                a = x1;
                x1 = x2;
                f1 = f2;
                x2 = (1.0 - this.Phi) * a + this.Phi * b;
                f2 = this.distanceAtAngle(points, T, x2);
            }
        }
        return Math.min(f1, f2);
    }

    recognize(points, useProtractor) {
        let t0 = Date.now();
        let candidate = new UniStroke("", points);

        let u = -1;
        let b = +Infinity;
        for (let i = 0; i < this.gestures.length; i++) {
            let d;
            if (useProtractor)
                d = this.optimalCosineDistance(this.gestures[i].Vector, candidate.Vector); // Protractor
            else
                d = this.distanceAtBestAngle(candidate.points, this.gestures[i], -this.AngleRange, +this.AngleRange, this.AnglePrecision); // Golden Section Search (original $1)
            if (d < b) {
                b = d; // best (least) distance
                u = i; // unistroke index
            }
        }
        let t1 = Date.now();
        return (u === -1 || (1.0 - b <= 0.4)) ? new Result("No match.", 0.0, t1 - t0) : new Result(this.gestures[u].Name, useProtractor ? (1.0 - b) : (1.0 - b / this.HalfDiagonal), t1 - t0);
    }

    addGesture(name, points) {
        this.gestures[this.gestures.length] = new UniStroke(name, points); // append new unistroke
        let num = 0;
        for (let i = 0; i < this.gestures.length; i++) {
            if (this.gestures[i].Name == name)
                num++;
        }
        return num;
    }
    deleteUserGestures() {
        this.gestures.length = this.NumUnistrokes; // clear any beyond the original set
        return this.gestures.length;
    }
}

export const pathRecognizer = new PathRecognizer();
export { Point, Rectangle, UniStroke };